flask:
  build: ./flask
  ports:
    - "80:80"

vue:
  build: ./vue
  restart: on-failure
  ports:
    - "8080:8080"

mysql:
  image: mysql:5.7
  ports:
    - "3306:3306"
  environment:
    MYSQL_ROOT_PASSWORD: root
  volumes:
    - ./volumes/mysql:/docker-entrypoint-initdb.d/:ro

elasticsearch:
  image: docker.elastic.co/elasticsearch/elasticsearch:7.0.0
  environment:
    - discovery.type=single-node
  ports:
    - "9200:9200"

nginx:
  image: nginx:1.15-alpine
  ports:
    - "81:80"
  volumes:
    #- ./volumes/nginx/conf:/etc/nginx/conf.d
    - ./volumes/nginx/src:/usr/share/nginx/html

kibana:
  image: docker.elastic.co/kibana/kibana:7.0.0
  ports:
    - "5601:5601"

zookeeper:
  image: wurstmeister/zookeeper
  ports:
    - "2181:2181"

kafka:
  image: wurstmeister/kafka
  ports:
    - "9092"
  environment:
    KAFKA_ADVERTISED_HOST_NAME: 192.168.43.238
    KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
  volumes:
    - /var/run/docker.sock:/var/run/docker.sock