app:
  build: ./app
  ports:
  - "80:80"

ui:
  build: ./ui
  restart: on-failure
  ports:
  - "8080:8080"

mysql:
  image: mysql:5.7
  ports:
  - "3306:3306"
  environment:
    MYSQL_ROOT_PASSWORD: root
  volumes:
  - ./mysql:/docker-entrypoint-initdb.d/:ro

elasticsearch:
  image: docker.elastic.co/elasticsearch/elasticsearch:7.0.0
  environment:
  - discovery.type=single-node
  ports:
  - "9200:9200"

#nginx:
#  image: nginx:1.15-alpine
#  depends_on:
#  - app
#  ports:
#  - "80:80"
#  volumes:
#  - ./data/nginx:/etc/nginx/conf.d

kibana:
  image: docker.elastic.co/kibana/kibana:7.0.0
  ports:
  - "5601:5601"